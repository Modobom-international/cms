!function(){"use strict";const e=function(){let e=localStorage.getItem("userUUID");e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),localStorage.setItem("userUUID",e));return e}(),t=window.innerWidth<=768,i=[];let n,o=!1,r=!0,a=!0,s=0,c=k(),l=0,d=k();const u={en:{title:"Privacy Notice",message:"We collect information about your usage behavior, device, and referrer for analytics, experience optimization, and security. You can accept or reject.",details:"Collected data: clicks, mouse movements, device, browser, referrer, session time. Purpose: analytics, optimization, security.",accept:"Accept",reject:"Reject"},fr:{title:"Avis de confidentialité",message:"Nous collectons des informations sur votre comportement d'utilisation, votre appareil et votre référent pour l'analyse, l'optimisation de l'expérience et la sécurité. Vous pouvez accepter ou refuser.",details:"Données collectées : clics, mouvements de souris, appareil, navigateur, référent, durée de session. Objectif : analyse, optimisation, sécurité.",accept:"Accepter",reject:"Refuser"},de:{title:"Datenschutzhinweis",message:"Wir erfassen Informationen über Ihr Nutzungsverhalten, Ihr Gerät und den Referrer für Analysen, Optimierung und Sicherheit. Sie können akzeptieren oder ablehnen.",details:"Gesammelte Daten: Klicks, Mausbewegungen, Gerät, Browser, Referrer, Sitzungsdauer. Zweck: Analyse, Optimierung, Sicherheit.",accept:"Akzeptieren",reject:"Ablehnen"},it:{title:"Informativa sulla privacy",message:"Raccogliamo informazioni sul comportamento di utilizzo, dispositivo e referrer per analisi, ottimizzazione e sicurezza. Puoi accettare o rifiutare.",details:"Dati raccolti: clic, movimenti del mouse, dispositivo, browser, referrer, durata sessione. Scopo: analisi, ottimizzazione, sicurezza.",accept:"Accetta",reject:"Rifiuta"},es:{title:"Aviso de privacidad",message:"Recopilamos información sobre su comportamiento de uso, dispositivo y referencia para análisis, optimización y seguridad. Puede aceptar o rechazar.",details:"Datos recopilados: clics, movimientos del ratón, dispositivo, navegador, referencia, tiempo de sesión. Propósito: análisis, optimización, seguridad.",accept:"Aceptar",reject:"Rechazar"},ro:{title:"Notificare de Confidențialitate",message:"Colectăm informații despre comportamentul de utilizare, dispozitiv și sursa de acces pentru analiză, optimizare și securitate. Puteți accepta sau respinge.",details:"Date colectate: click-uri, mișcări mouse, dispozitiv, browser, referrer, timp sesiune. Scop: analiză, optimizare, securitate.",accept:"Acceptă",reject:"Respinge"},pl:{title:"Informacja o prywatności",message:"Zbieramy informacje o Twoim zachowaniu, urządzeniu i źródle wejścia w celach analitycznych, optymalizacyjnych i bezpieczeństwa. Możesz zaakceptować lub odrzucić.",details:"Zbierane dane: kliknięcia, ruchy myszą, urządzenie, przeglądarka, referrer, czas sesji. Cel: analiza, optymalizacja, bezpieczeństwo.",accept:"Akceptuj",reject:"Odrzuć"},nl:{title:"Privacyverklaring",message:"We verzamelen informatie over uw gebruiksgedrag, apparaat en referrer voor analyse, optimalisatie en beveiliging. U kunt accepteren of weigeren.",details:"Verzamelde gegevens: klikken, muisbewegingen, apparaat, browser, referrer, sessieduur. Doel: analyse, optimalisatie, beveiliging.",accept:"Accepteren",reject:"Weigeren"},sv:{title:"Integritetsmeddelande",message:"Vi samlar in information om ditt användarbeteende, enhet och hänvisning för analys, optimering och säkerhet. Du kan acceptera eller avvisa.",details:"Insamlade data: klick, musrörelser, enhet, webbläsare, hänvisning, sessionstid. Syfte: analys, optimering, säkerhet.",accept:"Acceptera",reject:"Avvisa"},da:{title:"Privatlivsmeddelelse",message:"Vi indsamler oplysninger om din brug, enhed og henviser til analyse, optimering og sikkerhed. Du kan acceptere eller afvise.",details:"Indsamlede data: klik, musebevægelser, enhed, browser, henviser, sessionstid. Formål: analyse, optimering, sikkerhed.",accept:"Accepter",reject:"Afvis"},fi:{title:"Tietosuojailmoitus",message:"Keräämme tietoja käyttötavastasi, laitteestasi ja viittaajasta analysointia, optimointia ja turvallisuutta varten. Voit hyväksyä tai hylätä.",details:"Kerätyt tiedot: napsautukset, hiiren liikkeet, laite, selain, viittaaja, istunnon kesto. Tarkoitus: analyysi, optimointi, turvallisuus.",accept:"Hyväksy",reject:"Hylkää"}};function m(){return o&&!function(){const e=navigator.userAgent.toLowerCase(),t=navigator.webdriver||!window.outerWidth||performance.timing.domInteractive<100;return[/bot/i,/spider/i,/crawler/i,/slurp/i,/googlebot/i,/bingbot/i,/yandexbot/i,/duckduckbot/i,/baiduspider/i,/facebot/i,/ia_archiver/i,/headless/i].some((t=>t.test(e)))||t}()}function p(){const e={userAgent:navigator.userAgent,browser:function(){const e=navigator.userAgent;let t="Unknown",i="";return/chrome|crios/i.test(e)?(t="Chrome",i=e.match(/(?:chrome|crios)\/(\d+\.\d+)/i)?.[1]||""):/firefox|fxios/i.test(e)?(t="Firefox",i=e.match(/(?:firefox|fxios)\/(\d+\.\d+)/i)?.[1]||""):/safari/i.test(e)&&!/chrome/i.test(e)?(t="Safari",i=e.match(/version\/(\d+\.\d+)/i)?.[1]||""):/edg/i.test(e)&&(t="Edge",i=e.match(/edg\/(\d+\.\d+)/i)?.[1]||""),{name:t,version:i}}(),windowSize:{width:window.innerWidth,height:window.innerHeight},referrer:document.referrer||"Direct",trafficSource:function(e){if(!e||""===e)return"Direct";const t=new URL(e).hostname.toLowerCase();return t.includes("google.")?"Google Search":t.includes("facebook.com")?"Facebook":t.includes("twitter.com")||t.includes("x.com")?"Twitter":"Other"}(document.referrer),pageLoadTime:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart};return r&&(e.analytics={pageLoadTime:e.pageLoadTime,windowSize:e.windowSize}),a&&(e.personalization={trafficSource:e.trafficSource,referrer:e.referrer}),e}function g(e){return{tagName:e.tagName,id:e.id||"",classes:e.className?Array.from(e.classList):[],textContent:e.textContent?e.textContent.trim().substring(0,100):"",position:{x:e.getBoundingClientRect().left+window.scrollX,y:e.getBoundingClientRect().top+window.scrollY,width:e.offsetWidth,height:e.offsetHeight},isButton:"BUTTON"===e.tagName||"button"===e.type||e.classList.contains("btn"),isInput:["INPUT","TEXTAREA","SELECT"].includes(e.tagName)}}function f(){y({uuid:e,timestamp:x(),domain:window.location.hostname,path:window.location.pathname+window.location.search,userInfo:p()},"/api/heartbeat")}function h(e,t,n){if(m()&&(r||a)){const o={...t};r||(delete o.screenWidth,delete o.screenHeight,delete o.scrollHeight,delete o.scrollTop,delete o.scrollLeft),a||(delete t.isInternalLink,delete t.isLassoButton),i.push({time:n,event:e,data:o})}}function w(){const e=k();l+=e-d,d=e}function v(){window.addEventListener("focus",(()=>{d=Date.now();h("window_focus",{},x())})),window.addEventListener("blur",(()=>{w();h("window_blur",{},x())})),document.addEventListener("click",(e=>{const i=e.target,n=document.body.scrollHeight||document.documentElement.scrollHeight;let o={x:e.pageX,y:e.pageY,elementDetails:g(i),href:i.href||"",isInternalLink:i.href&&i.href.includes(window.location.origin),isLassoButton:i.classList.contains("lasso-button"),device:t?"mobile":"desktop",height:n,screenWidth:window.innerWidth,screenHeight:window.innerHeight,scrollHeight:n};const r=x();b("click",o),h("click",o,r)})),document.addEventListener("mousemove",z((e=>{const i=e.target,n=e.pageX,o=e.pageY,r=t?"mobile":"desktop",a=document.body.scrollHeight||document.documentElement.scrollHeight;s++;const c={x:n,y:o,mouseMovements:s,elementDetails:g(i),device:r,height:a,screenWidth:window.innerWidth,screenHeight:window.innerHeight,scrollHeight:a},l=x();b("mousemove",c),h("mousemove",c,l)}),100)),document.addEventListener("scroll",z((()=>{const e={scrollTop:window.scrollY,scrollLeft:window.scrollX,device:t?"mobile":"desktop",screenWidth:window.innerWidth,screenHeight:window.innerHeight,scrollHeight:document.body.scrollHeight||document.documentElement.scrollHeight},i=x();b("scroll",e),h("scroll",e,i)}),100)),document.addEventListener("keydown",(e=>{0;const i=e.target,n={elementDetails:g(i),value:i.value||"",key:e.key,device:t?"mobile":"desktop"},o=x();b("keydown",n),h("keydown",n,o)})),window.addEventListener("beforeunload",(()=>{w(),m()&&i.length>0&&(clearInterval(n),y({uuid:e,domain:window.location.hostname,path:window.location.pathname+window.location.search,startTime:c,endTime:k(),totalTime:l,timeline:i,userInfo:p()},"/api/create-video-timeline"))})),f(),n=setInterval((()=>{m()?f():clearInterval(n)}),5e3)}function y(e,t){if(m()){let i=function(){const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?"http://127.0.0.1:8000":"https://api.modobomco.com"}()+t;fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((e=>console.error("Error sending data to server:",e)))}}function b(t,i){const n=window.location.pathname+window.location.search,o={eventName:t,eventData:i,timestamp:x(),user:p(),domain:window.location.hostname,uuid:e,path:n};m()&&y(o,"/api/tracking-event")}function x(){const e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t+252e5).toISOString()}function k(){const e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t+252e5).getTime()}function z(e,t){let i;return function(...n){i||(e.apply(this,n),i=!0,setTimeout((()=>i=!1),t))}}function j(e,t){const i=function(){const e=(navigator.language||navigator.userLanguage||"en").split("-")[0];return Object.keys(u).includes(e)?e:"en"}(),n=u[i],o=document.createElement("div");o.style.position="fixed",o.style.bottom="10px",o.style.left="10px",o.style.right="10px",o.style.backgroundColor="#f5f5f5",o.style.padding="20px",o.style.borderRadius="8px",o.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)",o.style.maxWidth="95vw",o.style.zIndex="1000",o.style.fontFamily="Arial, sans-serif",o.style.margin="0 auto",o.style.width="calc(100vw - 20px)",o.innerHTML=`\n            <div style="text-align:center;">\n                <h2 style="font-size:18px; margin:0 0 10px 0;">${n.title}</h2>\n                <p style="font-size:14px; margin-bottom:8px;">${n.message}</p>\n                <p style="font-size:12px; color:#555; margin-bottom:16px;">${n.details}</p>\n                <button id="consent-accept" style="padding:10px 20px; background:#007bff; color:#fff; border:none; border-radius:4px; margin-right:10px; cursor:pointer;">${n.accept}</button>\n                <button id="consent-reject" style="padding:10px 20px; background:#f0f0f0; color:#333; border:none; border-radius:4px; cursor:pointer;">${n.reject}</button>\n            </div>\n        `,document.body.appendChild(o),document.getElementById("consent-accept").onclick=function(){document.body.removeChild(o),e()},document.getElementById("consent-reject").onclick=function(){document.body.removeChild(o),t()}}window.addEventListener("load",(function(){var e;e=function(e){!function(e){return["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","UK","GB"].includes(e)}(e)?(o=!0,r=!0,a=!0,v()):j((function(){o=!0,r=!0,a=!0,v()}),(function(){o=!1,r=!1,a=!1}))},fetch("https://ipapi.co/json/").then((e=>e.json())).then((t=>{e(t.country_code)})).catch((()=>{e("EU")}))}))}();